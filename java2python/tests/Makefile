PYTHONPATH=../../:.
CLASSPATH:=.:/usr/share/junit/lib/junit.jar

PYOBJS=Loops.py AssignInExpr.py EmptyArray.py Switches.py ClassMember.py \
	FloatFix.py Keywords.py ClassInit.py SuperCtorTest.py
JAVAOBJS=Loops AssignInExpr EmptyArray Switches ClassMember FloatFix Keywords \
	ClassInit SuperCtorTest

all: python-test

python-test: $(PYOBJS)

java-test: $(JAVAOBJS)

%.py: %.java testconfig.py
	../bin/j2py -i $< -o $@ -c testconfig
	python $@

%: %.java
	javac $<
	java junit.textui.TestRunner $@

clean:
	rm -f $(PYOBJS)
	rm -f *.class *.pyc
